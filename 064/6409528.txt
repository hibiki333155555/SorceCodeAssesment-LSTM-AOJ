import java.util.Scanner;

class StringNew {
    private String str;

    // コンストラクタ
    public StringNew(String str) {
        this.str = str;
    }

    public String getStr() {
        return str;
    }

    public void setStr(String str) {
        this.str = str;
    }

    public void print(int num1, int num2) {
        System.out.println(str.substring(num1, num2 + 1));
    }

    public void reverse(int num1, int num2) {
        StringBuilder sb = new StringBuilder(str.substring(num1, num2 + 1));
        String reverseStr = sb.reverse().toString();
        str = (str.substring(0, num1) + reverseStr + str.substring(num2 + 1));
    }

    public void replace(int num1, int num2, String replaceStr) {
        StringBuilder sb = new StringBuilder(str);
        sb.replace(num1, num2 + 1, replaceStr);
        str = sb.toString();
    }
}

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        String str, replaceStr;
        int num1, num2;

        str = sc.next();
        int n = sc.nextInt();
        StringNew strnew = new StringNew(str);

        for (int i = 0; i < n; i++) {
            str = sc.next();
            num1 = sc.nextInt();
            num2 = sc.nextInt();

            switch (str) {
                case "print":
                    strnew.print(num1, num2);
                    break;
                case "reverse":
                    strnew.reverse(num1, num2);
                    break;
                case "replace":
                    replaceStr = sc.next();
                    strnew.replace(num1, num2, replaceStr);
                    break;
            }
        }
    }
}

