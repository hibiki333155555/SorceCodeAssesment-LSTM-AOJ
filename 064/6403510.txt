#include <iostream>
#include <algorithm>

using namespace std;

void _print(std::string str, int i, int j){
    cout << str.substr(i, j - i + 1) << endl;
}

void _replace(string& str, int i, int j, string input){
    str.replace(i, j - i + 1, input);
}

void _reverse(string& str, int i, int j){
    reverse(str.begin()+i, str.begin()+j+1);
}

int main(){
    string str, op, input;
    int n, i, j;
    cin>>str>>n;
    for(int m=0; m<n;m++){
        cin>>op;
        if(op=="print"){
            cin>>i>>j;
            _print(str, i, j);
        }
        else if(op == "replace"){
            cin>>i>>j>>input;
            _replace(str, i,j,input);
        }
        else if(op=="reverse"){
            cin>>i>>j;
            _reverse(str,i,j);
        }
    }
    return 0;
}
