#include <iostream>
using namespace std;
typedef long long int ll;

#define max_N 50
#define max_M 50

ll N;
ll M;
ll type; 
ll a;
ll b;
ll c;
ll d;
ll students[max_M][max_N];
ll querys[max_M];
char buffer[60];

int main() {
	//scanf("%lld %lld",&N,&M);
	int i = 0;
	int q = 0;
	int r = 0;
	

	int c_prev;
	while(true){
		while( fgets(buffer, sizeof(buffer) , stdin) )
		{
			sscanf(buffer, "%lld %lld %lld %lld", &a,&b,&c,&d);
			if(i == 0){
				N = a;
				M = b;

				for(ll ni = 1; ni <= N; ni++){
					students[0][ni] = 0;
				}
			}else{
				type = a;
				a = b;
				b = c;
				c = d;

				c_prev = 0;
				if(type == 1){
					for(ll ni = 1; ni <= N; ni++){
						if(r > 0)
							c_prev = students[r-1][ni];
						if(ni >= a && ni <= b)
							students[r][ni] = (c_prev + c) % 4; // 0 = north | 2 = south
						else
							students[r][ni] = students[r-1][ni];
					}
					r++;
				}
				if(type == 2){
					int north = 0;
					int south = 0;
					int y = r == 0 ? 0 : r - 1;
					for(ll si = 0; si <= N; si++){
						if(si >= a && si <= b){
							if(students[y][si] == 0)
								north++;
							else if(students[y][si] == 2 || students[y][si] == -2)
								south++;
						}
					}
					querys[q] = north - south;
					q++;
				}
			}
			i++;
			if(i == M+1)
				break;
		}
		if(i >= M)
			break;
	}

	i = 0;
	while(true){
		cout << querys[i] << "\n";
		if(i == q-1)
			break;
		i++;
	}
	return 0;
}
