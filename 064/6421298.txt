#include <bits/stdc++.h>
#include <complex>
#include <random>
#include <functional>
using namespace std;
using ll = long long;
#define all(A) A.begin(),A.end()
using vll = vector<ll>;
using vvll = vector<vll>;
using vvvll = vector<vvll>;
using vvvvll = vector<vvvll>;
#define rep(i, n) for (long long i = 0; i < (long long)(n); i++)
vvll G;
ll mod=998244353;


int main() {
    ll N;
    cin>>N;
    vll A(N);
    rep(i,N)cin>>A[i];
    ll Q;
    cin>>Q;
    stack<pair<ll,ll>> sw;
    vll P(N);
    vll D(N);
    rep(n,N)D[n]=n;
    rep(n,N)P[n]=n;
    rep(q,Q){
        ll T;
        cin>>T;
        if(T==1){
            ll X,Y;
            cin>>X>>Y;
            sw.push({X-1,Y-1});
            swap(P[X-1],P[Y-1]);
        }
        else if(T==2){
            ll X=sw.top().first;
            ll Y=sw.top().second;
            swap(P[X],P[Y]);
            sw.pop();
        }
        else{
            ll k;
            cin>>k;
            vll R=P;
            while(k>0){
                if(k%2==1){
                    vll CD(N);
                    rep(n,N){
                        CD[n]=D[R[n]];
                    }
                    D=CD;
                }
                vll CR(N);
                rep(i,N)CR[i]=R[R[i]];
                R=CR;

                k/=2;
            }
            


        }
    }
    rep(n,N){
        cout<<A[D[n]]<<(n==N-1?"\n":" ");
    }



}


