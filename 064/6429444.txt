#include<iostream>
#include<string>
#include<sstream>

using namespace std;

int main() {
    string str, word, commandLine, strRep, strRes, command;
    int n, idx1, idx2, flag;
    cin >> str >> n;
    std::cin.ignore(32767, '\n');
    while(n > 0) {
    	flag = 0;
        getline(cin, commandLine);
        stringstream ss(commandLine);
        while(ss >> word) {
            if(flag == 0) {
                command = word;
            }
            if(flag == 1) {
                idx1 = stoi(word);
            }
            if(flag == 2) {
                idx2 = stoi(word);
            }
            if(flag == 3) {
                strRep = word;
            }
            flag++;
        }
        if(command == "print") {
            for(int i = idx1; i <= idx2; i++) {
                cout << str[i];
            }
            cout << endl;
        }
        if(command == "replace") {
            str.replace(idx1, (idx2 - idx1 + 1), strRep);
        }
        if(command == "reverse") {
            strRes = str.substr(0, idx1);
            for(int i = idx2; i >= idx1; i--) {
            	strRes += str[i];
			}
			strRes += str.substr(idx2 + 1);
			str = strRes;
        }
        n--;
    }
    return 0;
}
