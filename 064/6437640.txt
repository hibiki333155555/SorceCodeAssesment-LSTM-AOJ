#include<bits/stdc++.h>

using namespace std;

int main(){
	string s;
	cin >> s;
	int m;
	cin >> m;
	for(int i=0;i<m;i++){
		string func;
		cin >> func;
		if(func == "print"){
			int a,b;
			cin >> a >> b;
			int range = b-a+1;
			string out = s.substr(a,range);
			cout << out << endl;
		}else if(func == "reverse"){
			int a,b;
			cin >> a >> b;
			++b;
			reverse(&s.at(a),&s.at(b));
		}else{
			int a,b;
			string str;
			cin >> a >> b >> str;
			s.replace(a,b,str);
		}
	}
	return(0);
}
