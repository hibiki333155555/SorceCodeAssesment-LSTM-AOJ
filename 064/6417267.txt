# mon9_D
st=input()
n=int(input())
for i in range(n):
  inf=input().split()
  a=int(inf[1])
  b=int(inf[2])
  if inf[0]=='print':
    print(st[a:b+1])
  elif inf[0]=='reverse':
    mid=st[::-1]
    st=(st[:a]+mid+st[:b+1])
  elif inf[0]=='replace':
    p=inf[3]
    st=(st[:a]+p+st[:b+1])
