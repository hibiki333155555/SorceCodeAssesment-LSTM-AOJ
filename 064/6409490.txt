import java.util.Scanner;

class StringNew {
    private String str;

    public StringNew(String str) {
        this.str = str;
    }

    public void setStr(String str) {
        this.str = str;
    }

    public void print(int num1, int num2) {
        System.out.println(str.substring(num1, num2 + 1));
    }

    public void reverse(int num1, int num2) {
        StringBuilder sb = new StringBuilder(str.substring(num1, num2 + 1));
        String stringreverse = sb.reverse().toString();
        str = (str.substring(0, num1) + stringreverse + str.substring(num2 + 1));
    }

    public void replace(int num1, int num2, String strplace) {
        StringBuilder sb = new StringBuilder(str);
        sb.replace(num1, num2 + 1, strplace);
        str = sb.toString();
    }
}

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        String str, strreplace;
        int num1, num2;

        str = sc.next();
        int n = sc.nextInt();
        StringNew strnew = new StringNew(str);

        for (int i = 0; i < n; i++) {
            str = sc.next();
            num1 = sc.nextInt();
            num2 = sc.nextInt();

            if (str.equals("print")) {
                strnew.print(num1, num2);
            } else if (str.equals("reverse")) {
                strnew.reverse(num1, num2);
            } else {
                strreplace = sc.next();
                strnew.replace(num1, num2, strreplace);
            }
        }
    }
}

