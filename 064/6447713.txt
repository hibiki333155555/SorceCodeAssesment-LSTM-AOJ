#include<bits/stdc++.h>
using namespace std;
using ll = long long;
#define rep(i,n) for(int i=0; i<n; ++i)

int main(){
    int V, E;
    cin >> V >> E;

    ll inf = 1000000000000000000;
    vector<vector<ll>> D(V, vector<ll>(V, inf));
    rep(i, V) D[i][i] = 0ll;

    vector<int> s(E), t(E);
    vector<ll> d(E);
    rep(i, E) cin >> s[i] >> t[i] >> d[i];
    rep(i, E) D[s[i]][t[i]] = d[i];

    rep(k, V) rep(i, V) rep(j, V){
        if(D[i][k] == inf) continue;
        D[i][j] = min(D[i][j], D[i][k] + D[k][j]);
    }

    rep(i, V) if(D[i][i] < 0){
        cout << "NEGATIVE CYCLE" << endl;
        return 0;
    } 

    rep(i, V) rep(j, V){
        if(D[i][j] == inf) cout << "INF";
        else cout << D[i][j];
        if(j < V-1) cout << " ";
        else cout << endl;
    }

    return 0;
}
