#include <bits/stdc++.h>
using namespace std;
 
int main() {
  string str, order, str2;
  int q, Num, Num2;
  cin >> str >> q;
  
  for (int i=0; i<q; i++){
    cin >> order >> Num >> Num2;
    
    if (order == "replace"){
      cin >> str2;
      str.replace(Num, Num2, str2);
    }
    
    else if (order == "reverse"){
      str2 = str.substr(Num, Num2-Num+1);
      reverse(str2.begin(),str2.end());
      str = str.replace(Num, Num2-Num+1, str2);
    }
    
    else if (order == "print"){
      str2 = str.substr(Num, Num2-Num+1);
      cout << str2 << endl;
      
      
    }
    
    
  }   
 
  
  
}
