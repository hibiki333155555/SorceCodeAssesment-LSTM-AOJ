import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scan = new Scanner(System.in);
        String str = scan.next();
        int q = scan.nextInt();

        for (int i = 0; i < q; i++) {
            String s = scan.next();
            if ("replace".equals(s)){
                int a = scan.nextInt();
                int b = scan.nextInt();
                String p = scan.next();
                String left = str.substring(0,a);
                String right = str.substring(b + 1);
                str = left + p + right;
            }else if ("reverse".equals(s)){
                int a = scan.nextInt();
                int b = scan.nextInt();
                String left = str.substring(0,a);
                String right = str.substring(b + 1);
                StringBuilder sb = new StringBuilder(str.substring(a,b + 1));
                sb = sb.reverse();
                str = left + sb + right;
            }else if ("print".equals(s)){
                int a = scan.nextInt();
                int b = scan.nextInt();
                System.out.println(str.substring(a,b + 1));
            }
        }
    }
}
