#include<iostream>
using namespace std;
int T,N,S;
int A[2<<17][4];
int main()
{
	cin>>T;
	for(;T--;)
	{
		cin>>N>>S;
		int c[4]={};
		for(int i=0;i<N;i++)
		{
			for(int j=0;j<4;j++)
			{
				cin>>A[i][j];
				c[A[i][j]]++;
			}
		}
		{//1 gyou
			bool fn=false;
			for(int i=0;i<N;i++)
			{
				int cnt=0;
				for(int j=0;j<4;j++)cnt+=A[i][j]==1;
				if(cnt==3)fn=true;
			}
			if(fn)
			{
				int n2=c[3]-c[2];
				if(n2==0)cout<<"1 2 1 3\n";
				else if(n2==1)cout<<"1 1 1 2\n";
				else if(n2==-1)cout<<"1 1 1 3\n";
				else if(n2==2)cout<<"1 2 1 2\n";
				else if(n2==-2)cout<<"1 3 1 3\n";
				else return 1;
				continue;
			}
		}
		{//kado
			int kado=0;
			for(int i=0;i<N;i++)
			{
				int cnt=0;
				for(int j=0;j<4;j++)cnt+=A[i][j]==1;
				if(cnt==2)kado++;
			}
			if(kado==3)
			{
				int n2=c[3]-c[2];
				if(n2==0)cout<<"1 1 2 3\n";
				else if(n2==2)cout<<"1 1 2 2\n";
				else if(n2==-2)cout<<"1 1 3 3\n";
				else return 1;
				continue;
			}
		}
		{//hen
			int chen[4]={};
			int hen=0;
			for(int i=0;i<N;i++)
			{
				int cnt=0;
				for(int j=0;j<4;j++)cnt+=A[i][j]==1;
				if(cnt==1||cnt==2)
				{
					hen++;
					for(int j=0;j<4;j++)chen[A[i][j]]++;
				}
			}
			if(hen%2==1)
			{
				int henn2=chen[3]-chen[2];
				int n2=c[3]-c[2]-henn2;
				if(henn2==0)
				{
					if(n2==1)cout<<"1 2 2 3\n";
					else if(n2==-1)cout<<"1 2 3 3\n";
					else return 1;
				}
				else if(henn2==2)
				{
					if(n2==1)cout<<"1 2 2 2\n";
					else if(n2==-1)cout<<"1 2 3 2\n";
					else return 1;
				}
				else if(henn2==-2)
				{
					if(n2==1)cout<<"1 3 2 3\n";
					else if(n2==-1)cout<<"1 3 3 3\n";
					else return 1;
				}
				else return 1;
				continue;
			}
		}
		{//naka
			int n2=c[3]-c[2];
			if(n2==4)cout<<"2 2 2 2\n";
			else if(n2==2)cout<<"2 2 2 3\n";
			else if(n2==0)
			{
				if(S==1)cout<<"2 3 2 3\n";
				else cout<<"2 2 3 3\n";
			}
			else if(n2==-2)cout<<"2 3 3 3\n";
			else if(n2==-4)cout<<"3 3 3 3\n";
			else return 1;
		}
	}
}

