#include <iostream>
#include <vector>

template <typename T>
bool chmin(T &x, const T &y) {
    if (y < x) return x = y, true;
    return false;
}

int main() {
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr);

    int n;
    std::cin >> n;

    std::vector<int> len(n);
    for (auto &l : len) std::cin >> l;

    std::vector<std::vector<uint64_t>> a(n);
    
    for (int i = 0; i < n; ++i) {
        for (int j = 0; j < len[i]; ++j) {
            uint64_t e;
            std::cin >> e;
            for (uint64_t b : a[i]) {
                chmin(e, e ^ b);
            }
            if (e) a[i].push_back(e);
        }
    }

    auto intersection = [](std::vector<uint64_t> x, std::vector<uint64_t> y) {
        std::vector<std::pair<uint64_t, uint64_t>> basis;
        for (uint64_t e : x) basis.emplace_back(e, e);
        std::vector<uint64_t> res;
        for (uint64_t e : y) {
            uint64_t s = 0;
            for (const auto &[v, t] : basis) if (chmin(e, e ^ v)) s ^= t;
            if (e == 0) {
                res.push_back(s);
            } else {
                basis.emplace_back(e, s);
            }
        }
        return res;
    };

    __uint128_t ans = 0;

    std::vector<std::vector<uint64_t>> dp(1 << n);
    for (int s = 1; s < 1 << n; ++s) {
        int l = __builtin_ctz(s), t = s ^ (1 << l);
        if (t == 0) {
            dp[s] = a[l];
        } else {
            dp[s] = intersection(a[l], dp[t]);
        }
        if (__builtin_popcount(s) & 1) {
            ans += uint64_t(1) << dp[s].size();
        } else {
            ans -= uint64_t(1) << dp[s].size();
        }
    }

    std::cout << uint64_t(ans) << std::endl;

    return 0;
}
