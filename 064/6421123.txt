#include <bits/stdc++.h>
#include <complex>
#include <random>
#include <functional>
using namespace std;
using ll = long long;
#define all(A) A.begin(),A.end()
using vll = vector<ll>;
using vvll = vector<vll>;
using vvvll = vector<vvll>;
using vvvvll = vector<vvvll>;
#define rep(i, n) for (long long i = 0; i < (long long)(n); i++)
vvll G;



int main() {
    ll H, W;
    cin >> H >> W;
    vector<string> S(H);
    pair<ll, ll> ST, SG;
    rep(i, H) {
        cin >> S[i];
        rep(w, W) {
            if (S[i][w] == 'S')ST = { i,w };
            if (S[i][w] == 'V')SG = { i,w };
        }
    }
    ll M;
    cin >> M;
    vector<vll> D(H, vll(W, 1e18));
    rep(i, M) {
        ll A, B, T;
        cin >> A >> B >> T;
        A--; B--;
        D[A][B] = min(D[A][B], T);
    }
    vector<ll> dist(H * W, 1e16);
    dist[ST.first * W + ST.second] = 0;
    vector<bool> seen(H * W, false);
    priority_queue<pair<ll, ll>, vector<pair<ll, ll>>, greater<pair<ll, ll>>> Q;
    Q.push({ 0,ST.first * W + ST.second });
    vll dx = { 1,0,-1,0 };
    vll dy = { 0,1,0,-1 };

    while (!Q.empty()) {
        auto p = Q.top();
        Q.pop();
        if (seen[p.second])continue;
        seen[
            p.second
        ] = true;

        ll y = p.second / W;
        ll x = p.second % W;

        ll ny, nx;
        rep(d, 4) {
            ny = y + dy[d];
            nx = x + dx[d];
            if (ny < 0 || ny >= H || nx < 0 || nx >= W)continue;
            if (S[ny][nx] == '#')continue;
            if (dist[ny * W + nx] <= dist[y * W + x] + 1)continue;
            if (seen[ny * W + nx])continue;
            if (dist[y * W + x] + 1 >= D[ny][nx])continue;
            dist[ny * W + nx] = dist[y * W + x]+1;
            Q.push({ dist[ny * W + nx],ny * W + nx });
        }

    }
    if (dist[SG.first * W + SG.second] > 1e15) {
        cout << "No" << endl;
        return 0;
    }
    ll ddd = dist[SG.first * W + SG.second];
    dist.assign(H * W, 1e18);
    dist[SG.first * W + SG.second] = ddd;
    seen.assign(H * W, false);
    Q.push({ ddd,SG.first * W + SG.second });
    while (!Q.empty()) {
        auto p = Q.top();
        Q.pop();
        if (seen[p.second])continue;
        seen[
            p.second
        ] = true;

        ll y = p.second / W;
        ll x = p.second % W;

        ll ny, nx;
        rep(d, 4) {
            ny = y + dy[d];
            nx = x + dx[d];
            if (ny < 0 || ny >= H || nx < 0 || nx >= W)continue;
            if (S[ny][nx] == '#')continue;
            if (dist[ny * W + nx] <= dist[y * W + x] + 1)continue;
            if (seen[ny * W + nx])continue;
            if (dist[y * W + x] + 1 >= D[ny][nx])continue;
            dist[ny * W + nx] = dist[y * W + x]+1;
            Q.push({ dist[ny * W + nx],ny * W + nx });
        }

    }
    if (dist[ST.first * W + ST.second] > 1e15) {
        cout << "No" << endl;
        return 0;
    }
    cout << "Yes" << endl;


}


