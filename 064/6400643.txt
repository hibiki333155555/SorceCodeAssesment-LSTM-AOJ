#include<bits/stdc++.h>
using namespace std;

deque<int>a;
int opt;

int main(){
	int q;
	int x;
	cin>>q;
	while(q--){
		cin>>opt;
		if(opt==0){
			int d;
			int x;
			cin>>d>>x;
			if(d==0){
				a.push_front(x);
			}
			else a.push_back(x);
		}
		if(opt==1){
			int p;
			cin>>p;
			cout<<a[p]<<endl;
		}
		if(opt==2){
			int d;
			int x;
			cin>>d>>x;
			if(d==0){
				a.pop_front();
			}
			else a.pop_back();
		}
		deque<int>::iterator it;
		for(;it!=a.end();it++){
			cout<<*it;
		}
		cout<<endl;
	}
	
	return 0;
}
