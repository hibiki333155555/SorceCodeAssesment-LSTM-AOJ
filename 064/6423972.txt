#include <bits/stdc++.h>
using namespace std;

const long long INF = 1LL << 60;

int min(int a, int b){
  if(a<b){
    return a;
  }else{
    return b;
  }
}

int main(){
  int v, e;
  cin >> v >> e;
  vector<vector<long long> > g(v, vector<long long>(v, INF));

  for(int i = 0; i< v; i++){
    g.at(i).at(i) = 0;
  }

  for(int i = 0; i < e; i++){
    int a, b;
    long long c;
    cin >> a >> b >> c;
    g.at(a).at(b) = c;
  }

  for(int k = 0; k < v; k++){
    for(int i = 0; i < v; i++){
      for(int j = 0; j < v; j++){
        if(g[i][k] == INF || g[k][j] == INF){
          continue;
        }else{
          g[i][j] = min(g[i][j], g[i][k] + g[k][j]);
        }
      }
    }
  }
  for(int i = 0; i < v; i++){
    if(g[i][i] < 0){
      cout << "NEGATIVE CYCLE" << endl;
      return 0;
    }
  }
  for(int i = 0; i < v; i++){
    for(int j = 0; j < v; j++){
      if(g[i][j] == INF){
        cout << "INF";
        if(j == v-1){
          cout << endl;
        }else{
          cout << " ";
        }
      }else{
        cout << g[i][j];
        if(j == v-1){
          cout << endl;
        }else{
          cout << " ";
        }
      }
    }
  }
  return 0;
}
