#include <iostream>
#include <string>
using namespace std;

string print(string str, int a, int b) return str.substr(a, b - a + 1);
void reverse(string str, int a, int b){
    string x = str.substr(a, b - a + 1);
    for(int i = 0; i < (b - a + 1) / 2; i++){
        char y;
        y = x[i];
        x[i] = x[b-a-i];
        x[b-a-n] = y;
    }
    str.replace(a, b - a + 1, x);
}
void replace2(string str, int a, int b, string p) str.replace(a, b - a + 1, p);

int main(){
    string l, m;
    int q;
    cin >> l >> q;
    for(int i = 0; i < q; i++){
        cin >> m;
        if(m == "replace"){
            int c, d;
            string n;
            cin >> c >> d >> n;
            replace2(l, c, d, n);
        }
        if(m == "reverse"){
            int e, f;
            cin >> e >> f;
            reverse(l, e, f);
        }
        if(m == "print"){
            int g, h;
            cin >> g >> h;
            print(l, g, h);
        }
    }
    cout >> l >> endl;
    
    return 0;
}

