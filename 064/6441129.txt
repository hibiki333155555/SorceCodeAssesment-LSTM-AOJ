#include<stdio.h>
#include<stdbool.h>
#define INF (1LL << 32)
#define MAX 100
#define min(x, y) (x > y ? y: x)

long long d[MAX][MAX];
int v;

void floyd(){
  for(int k = 0; k < v; k++ ){
    for(int i = 0; i < v; i++ ){
      if(d[i][k] == INF) continue;
      for(int j = 0; j < v; j++ ){
        if(d[k][j] == INF) continue;
        d[i][j] = min(d[i][j], d[i][k] + d[k][j]);
      }
    }
  }
}

int main()
{
  int e, s, t, c;
  scanf("%d %d", &v, &e);
  for(int i = 0; i < v; i++ ){
    for(int j = 0; j < v; j++ ){
      if(i == j) d[i][j] = 0;
      else d[i][j] = INF;
    }
  }
  for(int i = 0; i < e; i++ ){
    scanf("%d %d %d", &s, &t, &c);
    d[s][t] = c;
  }

  bool flag = false;

  for(int i = 0; i < v; i++ ){
    if(d[i][i] < 0) flag = true;
  }
  if(flag) printf("NEGATIVE CYCLE");
  else{
    for(int i = 0; i < v; i++ ){
      for(int j = 0; j < v; j++ ){
        if(d[i][j] == INF) printf("INF ");
        else printf("%d ", d[i][j]);
      }
      printf("\n");
    }
  }
  return 0;
}
