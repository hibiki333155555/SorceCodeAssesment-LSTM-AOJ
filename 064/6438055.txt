#include <bits/stdc++.h>
using namespace std;
 
int main() {
  string str, order, str2, str3;
  int q, Num, Num2;
  cin >> str >> q;
  
  for (int i=0; i<q; i++){
    cin >> order >> Num >> Num2;
    
    if (order == "replace"){
      cin >> str2;
      str.replace(Num, Num2-Num+1, str2);
    }
    
    else if (order == "reverse"){
      str3 = str.substr(Num, Num2-Num+1);
      reverse(str3.begin(),str3.end());
      str = str.replace(Num, Num2-Num+1, str3);
    }
    
    else if (order == "print"){
      str3 = str.substr(Num, Num2-Num+1);
      cout << str3 << endl;
      
      
    }
    
    
  }   
 
  
  
}

