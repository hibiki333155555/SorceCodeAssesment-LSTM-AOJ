#include <bits/stdc++.h>

using namespace std;
typedef long long ll;
typedef pair<ll, ll> P;
typedef vector<ll> vl;
typedef vector<bool> vb;
typedef vector<vl> vvl;
#define fi first
#define se second
#define all(x) (x).begin(), (x).end()
// const ll mod = 1000000007;
const ll mod = 998244353;
const ll inf = 1000000000000000000;
void yn(bool ok) { cout << (ok ? "yes\n" : "no\n"); }
void Yn(bool ok) { cout << (ok ? "Yes\n" : "No\n"); }
void YN(bool ok) { cout << (ok ? "YES\n" : "NO\n"); }
ll dx[8] = {1, 0, -1, 0, 1, 1, -1, -1}, dy[8] = {0, 1, 0, -1, 1, -1, 1, -1};
void solve() {
    ll n, s;
    cin >> n >> s;
    vvl a(n, vl(4));
    vl num(6);
    for (int i = 0; i < n; i++) {
        ll cnt = 0;
        for (int j = 0; j < 4; j++) {
            cin >> a[i][j];
            if (a[i][j] == 1) cnt++;
            if (a[i][j] == 2) num[4]++;
            if (a[i][j] == 3) num[5]++;
        }
        num[cnt]++;
    }
    string res = "";
    if (num[3]) {
        if (num[3] == 1) {
            if (num[4] > num[5])
                res = "1 1 1 3";
            else
                res = "1 1 1 2";
        } else {
            if (num[4] > num[5])
                res = "1 3 1 3";
            else if (num[4] == num[5])
                res = "1 2 1 3";
            else
                res = "1 2 1 2";
        }
    } else {
        if (num[2] == 3) {
            if (num[4] > num[5])
                res = "1 1 3 3";
            else if (num[4] == num[5])
                res = "1 1 2 3";
            else
                res = "1 1 2 2";
        } else {
            if (abs(num[4] - num[5]) % 2) {
                if (num[4] > num[5]) {
                    if (num[4] - num[5] == 3)
                        res = "1 3 3 3";
                    else {
                        if (s)
                            res = "1 3 2 3";
                        else
                            res = "1 2 3 3";
                    }
                } else {
                    if (num[5] - num[4] == 3)
                        res = "1 2 2 2";
                    else {
                        if (s)
                            res = "1 2 3 2";
                        else
                            res = "1 2 2 3";
                    }
                }
            } else {
                if (num[4] > num[5]) {
                    if (num[4] - num[5] == 4)
                        res = "3 3 3 3";
                    else
                        res = "2 3 3 3";
                } else if (num[4] == num[5]) {
                    if (s)
                        res = "2 3 2 3";
                    else
                        res = "2 2 3 3";
                } else {
                    if (num[5] - num[4] == 4)
                        res = "2 2 2 2";
                    else
                        res = "2 2 2 3";
                }
            }
        }
    }
    cout << res << endl;
}

int main() {
    cin.tie(nullptr);
    ios::sync_with_stdio(false);
    ll t = 1;
    cin >> t;
    while (t--) solve();
    return 0;
}
