
import scala.io.StdIn

object Main {

  def replace(str: String, a: Int, b: Int, p: String): String = {
    str.replace(str.substring(a, b+1), p)
  }

  def reverse(str: String, a: Int, b: Int): String = {
    str.replace(str.substring(a, b+1), str.substring(a, b+1).reverse)
  }

  def print(str: String, a: Int, b: Int): String = {
    val print_str = str.substring(a, b+1)
    println(print_str)
    print_str
  }

  def main(args: Array[String]): Unit = {
    val str = StdIn.readLine()

    val processNumber = StdIn.readInt()

    (1 to processNumber)
      .map(_ => StdIn.readLine())
      .foldLeft(str)((str, line) =>{
        val commandArray = line.split(" ")
        val function = commandArray(0)
        function match {
          case "replace" => replace(str, commandArray(1).toInt, commandArray(2).toInt, commandArray(3))
          case "reverse" => reverse(str, commandArray(1).toInt, commandArray(2).toInt)
          case "print" => print(str, commandArray(1).toInt, commandArray(2).toInt)
        }
      })


    }
}

