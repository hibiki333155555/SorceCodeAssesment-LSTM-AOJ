#include <bits/stdc++.h>
using namespace std;
int main(){
    int N;
    cin >> N;
    vector<int> A(N);
    for(int i = 0; i < N; i++) cin >> A[i];
    int Q;
    cin >> Q;
    vector<pair<int, int>> v;
    while(Q--){
        int t;
        cin >> t;
        if(t == 1){
            int x, y;
            cin >> x >> y;
            x--;
            y--;
            v.push_back({x, y});
        }
        else if(t == 2){
            v.pop_back();
        }
        else{
            int k;
            cin >> k;
            vector<int> ind(N);
            iota(ind.begin(), ind.end(), 0);
            for(int i = 0; i < (int)v.size(); i++){
                auto [x, y] = v[i];
                swap(ind[x], ind[y]);
            }
            vector<vector<int>> d(30, vector<int>(N));
            for(int i = 0; i < N; i++) d[0][i] = ind[i];
            for(int i = 1; i < 30; i++){
                for(int j = 0; j < N; j++) d[i][j] = d[i - 1][d[i - 1][j]];
            }
            int cnt= 0;
            iota(ind.begin(), ind.end(), 0);
            while(k){
                if(k & 1){
                    vector<int> id(N);
                    for(int i = 0; i < N; i++){
                        id[i] = d[cnt][ind[i]];
                    }
                    ind.swap(id);
                }
                ++cnt;
                k >>= 1;
            }
            vector<int> B(N);
            for(int i = 0; i < N; i++){
                B[i] = A[ind[i]];
            }
            A.swap(B);
        }
    }
    for(int i = 0; i < N; i++) cout << A[i] << " \n"[i == N - 1];
}
