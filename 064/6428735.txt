#include <bits/stdc++.h>
using namespace std;

int main(){
  int V,E;
  int INF = 1<<30;
  cin >> V >> E;
  
  vector<vector<long long>> dist(V,vector<long long>(V,INF));
  for(int i=0; i<V; i++){
    dist.at(i).at(i) = 0;
  }
  for(int i=0; i<E; i++){
    int s,t,d;
    cin >> s >> t >> d;
    dist.at(s).at(t) = d;
  }
  
  for(int k=0; k<V; k++){
    for(int i=0; i<V; i++){
      for(int j=0; j<V; j++){
        dist.at(i).at(j) = min(dist.at(i).at(j), dist.at(i).at(k)+dist.at(k).at(j));
      }
    }
  }
  
  for(int i=0; i<V; i++){
    if(dist.at(i).at(i) < 0){
      //cout << dist.at(i).at(i);
      cout << "NEGATIVE CYCLE" << endl;
      return 0;
    }
  }
  
  for(int i=0; i<V; i++){
    for(int j=0; j<V; j++){
      if(j!=0) cout << " ";
      if(dist.at(i).at(j)==INF) cout << "INF";
      else cout << dist.at(i).at(j);
    }
    cout << endl;
  }
  return 0;
}
