def partition(arr, _p, r)
  x = arr[r]
  i = _p - 1
  (_p..(r - 1)).to_a.each do |j|
    if arr[j] <= x
      i = i + 1
      swap(arr, i, j)
    end
  end
  swap(arr, i + 1, r)
  return i + 1
end

def swap(arr, i, j)
  tmp = arr[i]
  arr[i] = arr[j]
  arr[j] = tmp
end

gets

arr = gets.split(' ').map(&:to_i)
index = partition(arr, 0, arr.size - 1)
res1 = arr[0...index]
res2 = ["[#{arr[index]}]"]
res3 = arr[(index + 1)..-1]
puts [res1, res2, res3].join(' ')

