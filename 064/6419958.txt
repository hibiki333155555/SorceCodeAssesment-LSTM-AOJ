#include <bits/stdc++.h>

enum ope
{
  print,
  reverse,
  replace
};

int main()
{
    std::map<std::string, int> mp;
    mp["print"] = print;
    mp["reverse"] = reverse;
    mp["replace"] = replace;
    
    std::string str;
    int count;
    std::cin >> str >> count;

    for (int i = 0;i < count;++i) {
        std::string buff;
        int a, b;
        std::cin >> buff >> a >> b;
        switch ( mp[buff] )
        {
        case print:
            std::cout << std::string(str.begin()+a, str.begin()+b) << std::endl;
            break;
        case reverse:
            std::reverse(str.begin()+a, str.begin()+b);
            break;
        case replace:
        {
            std::string tmp;
            std::cin >> tmp;
            
            str.replace(str.begin()+a, str.begin()+a+b, tmp);
            break;
        }
        }
    }
    
    return 0;
}
