#include <bits/stdc++.h>
using namespace std;

int main(){
  string s;
  int q;
  cin >> s >> q;
  
  for(int i=0; i<q; i++){
    string ord;
    int a,b;
    cin >> ord >> a >> b;
    if(ord=="print"){
      for(int j=a; j<=b; j++){
        cout << s.at(j);
      }
      cout << endl;
    }else if(ord=="reverse"){
      string r = s;
      for(int j=0; j<=b-a; j++){
        s.at(j+a) = r.at(b-j);
      }
    }else{
      string p;
      cin >> p;
      for(int j=a; j<=b; j++){
        s.at(j) = p.at(j-a);
      }
    }
  }
        
  
  return 0; 
}
