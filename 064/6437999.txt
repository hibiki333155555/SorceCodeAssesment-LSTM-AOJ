#include <bits/stdc++.h>
using namespace std;
 
int main() {
  string str, order, str2;
  int q, Num, Num2;
  cin >> str >> q;
  
  for (int i=0; i<q; i++){
    cin >> order;
    
    if (order == "replace"){
      cin >> Num >> Num2 >> str2;
      str.replace(Num, Num2, str2);
    }
    
    else if (order == "reverse"){
      cin >> Num >> Num2;
      reverse(str.begin() + Num,str.end() - Num2);
    }
    
    else if (order == "print"){
      cin >> Num >> Num2;
      
      for (int i=Num; i<=Num2; i++){
        cout << str[i];
        
        if (i==Num2){
          cout << endl;
        }
        
      }
      
    }
    
    
  }   
 
  
  
}
