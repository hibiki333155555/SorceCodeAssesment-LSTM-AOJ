#include <bits/stdc++.h>
using namespace std;
int main(){
  int T;
  cin >> T;
  for (int i = 0; i < T; i++){
    int N, S;
    cin >> N >> S;
    vector<vector<int>> A(N, vector<int>(4));
    for (int j = 0; j < N; j++){
      for (int k = 0; k < 4; k++){
        cin >> A[j][k];
      }
    }
    int cnt11 = 0, cnt111 = 0;
    int cnt1 = 0, cnt2 = 0, cnt3 = 0;
    int ce2 = 0, ce3 = 0;
    for (int j = 0; j < N; j++){
      int p1 = 0;
      for (int k = 0; k < 4; k++){
        if (A[j][k] == 1){
          cnt1++;
          p1++;
        }
        if (A[j][k] == 2){
          cnt2++;
          if (A[j][(k + 1) % 4] == 1 || A[j][(k + 3) % 4] == 1){
            ce2++;
          }
        }
        if (A[j][k] == 3){
          cnt3++;
          if (A[j][(k + 1) % 4] == 1 || A[j][(k + 3) % 4] == 1){
            ce3++;
          }
        }
      }
      if (p1 == 2){
        cnt11++;
      }
      if (p1 == 3){
        cnt111++;
      }
    }
    if (cnt111 > 0){
      if (cnt111 == 2){
        if (cnt2 < cnt3){
          cout << "1 2 1 2" << "\n";
        } else if (cnt2 > cnt3){
          cout << "1 3 1 3" << "\n";
        } else {
          cout << "1 2 1 3" << "\n";
        }
      } else {
        if (cnt2 < cnt3){
          cout << "1 1 1 2" << "\n";
        } else {
          cout << "1 1 1 3" << "\n";
        }
      }
    } else if (cnt11 < 4){
      if (cnt2 < cnt3){
        cout << "1 1 2 2" << "\n";
      } else if (cnt2 > cnt3){
        cout << "1 1 3 3" << "\n";
      } else {
        cout << "1 1 2 3" << "\n";
      }
    } else if (cnt1 % 2 == 1){
      if (cnt2 < cnt3){
        if (ce2 < ce3){
          cout << "1 2 3 2" << "\n";
        } else {
          cout << "1 2 2 3" << "\n";
        }
      } else {
        if (ce3 < ce2){
          cout << "1 3 2 3" << "\n";
        } else {
          cout << "1 2 3 3" << "\n";
        }
      }
    } else {
      if (cnt2 - cnt3 == 4){
        cout << "3 3 3 3" << "\n";
      } else if (cnt2 - cnt3 == -4){
        cout << "2 2 2 2" << "\n";
      } else if (cnt2 - cnt3 == 2){
        cout << "2 3 3 3" << "\n";
      } else if (cnt2 - cnt3 == -2){
        cout << "2 2 2 3" << "\n";
      } else {
        if (S == 1){
          cout << "2 3 2 3" << "\n";
        } else {
          cout << "2 2 3 3" << "\n";
        }
      }
    }
  }
}
