#include <algorithm>
#include <iostream>
#include <iterator>
#include <vector>
#include <numeric>
#include <string>
using namespace std;



int main()
{
    int q, a, b;

    string str, inst, rp_str;
    cin >> str >> q;

    while(q-- != 0)
    {
        cin >> inst >> a >> b;
        if(inst == "replace")
        {
            cin >> rp_str;
            str = str.replace(str.begin()+a, str.begin()+b+1, rp_str);
        }
        else if(inst == "print")
        {
            copy(str.begin()+a, str.end()+b+1, ostream_iterator<char>(cout));
            cout << endl;
        }
        else
        {
            rp_str = str.substr(a, b-a+1);
            str.replace(str.begin()+a, str.begin()+b+1, string(rp_str.rbegin(), rp_str.rend()));
        }
    }


    return 0;
}
