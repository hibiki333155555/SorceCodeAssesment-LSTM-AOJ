#include <iostream>
#include <vector>
#include <queue>

using namespace std;
struct d{
  int y,x,t;
};
pair<int,int> ar4[4] = {{-1,0},{1,0},{0,-1},{0,1}};

int main(){
  int h,w;cin>>h>>w;
  vector<vector<int>> close(h+2,vector<int>(w+2,0));
  int sy = -1,sx = -1,vy = -1, vx = -1;
  for(int i = 0; h > i; i++){
    for(int j = 0; w > j; j++){
      char tmp;cin>>tmp;
      if(tmp != '#'){
        close[i+1][j+1] = -1;
      }
      if(tmp == 'S'){
        sy = i+1;
        sx = j+1;
      }
      if(tmp == 'V'){
        vy = i+1;
        vx = j+1;
      }
    }
  }
  int m;cin>>m;
  for(int i = 0; m > i; i++){
    int a,b,t;cin>>a>>b>>t;
    close[a][b] = t;
  }
  // for(int i = 0; h+1 >= i; i++){
  //   for(int j = 0; w+1 >= j; j++){
  //     cout << close[i][j] << " ";
  //   }
  //   cout << endl;
  // }
  //go
  queue<d> A;
  A.push({sy,sx,0});
  int ok = -1;
  vector<vector<int>> lck(h+2,vector<int>(w+2,-1));
  while(A.size() && ok==-1) {
    auto z = A.front();A.pop();
    //cout << z.y << " " << z.x << endl;
    for(int i = 0; 4 > i && ok==-1; i++){
      //cout << i << endl;
      //cout << z.y+ar4[i].first << " " << z.x+ar4[i].second << " " << close[z.y+ar4[i].first][z.x+ar4[i].second] << endl;
      if((close[z.y+ar4[i].first][z.x+ar4[i].second] == -1 || close[z.y+ar4[i].first][z.x+ar4[i].second] > z.t+1) && lck[z.y+ar4[i].first][z.x+ar4[i].second] == -1){
        lck[z.y+ar4[i].first][z.x+ar4[i].second] = z.t;
        if(vy == z.y+ar4[i].first && vx == z.x+ar4[i].second){
          ok = z.t;
          break;
        }
        A.push({z.y+ar4[i].first,z.x+ar4[i].second,z.t+1});
      }
      //cout << z.y+ar4[i].first << " " << z.x+ar4[i].second << " " << close[z.y+ar4[i].first][z.x+ar4[i].second] << endl;
    }
    //cout << z.y << " " << z.x << endl;

  }
  if(ok == -1){
    cout << "No" << endl;
    return 0;
  }
  
  queue<d> B;
  B.push({vy,vx,ok+1});
  ok = -1;
  for(int i = 0; h+2 > i; i++){
    for(int j = 0; w+2 > j; j++){
      lck[i][j] = -1;
    }
  }
  while(B.size() && ok == -1){
    auto z = B.front();B.pop();
    //cout << z.y << " " << z.x << " " << z.t << endl;
    for(int i = 0; 4 > i && ok==-1; i++){
      if((close[z.y+ar4[i].first][z.x+ar4[i].second] == -1 || close[z.y+ar4[i].first][z.x+ar4[i].second] > z.t+1) && lck[z.y+ar4[i].first][z.x+ar4[i].second] == -1){
        lck[z.y+ar4[i].first][z.x+ar4[i].second] = z.t;
        //cout << z.y+ar4[i].first << " " << z.x+ar4[i].second << " " << close[z.y+ar4[i].first][z.x+ar4[i].second] << endl;
        if(sy == z.y+ar4[i].first && sx == z.x+ar4[i].second){
          ok = z.t;
          break;
        }
        //cout << z.y+ar4[i].first << " " << z.x+ar4[i].second << " " << close[z.y+ar4[i].first][z.x+ar4[i].second] << endl;
        B.push({z.y+ar4[i].first,z.x+ar4[i].second,z.t+1});
      }
    }
  }
  if(ok == -1){
    cout << "No" << endl;
  }else{
    cout << "Yes" << endl;
  }




  //back


}
