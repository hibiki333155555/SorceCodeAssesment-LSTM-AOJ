#include <iostream>
using namespace std;

int main() {
    string str; cin>>str;
    int q; cin>>q;
    while(q--) {
        string cmd; int a,b; cin >> cmd >> a >> b;
        if(cmd=="print") {
            for(int i=a;i<=b;i++) cout<<str[i];
            cout<<endl;
        }else if(cmd=="reverse") {
            for(int i=a;i<=(b+a)/2;i++) {
                char tmp = str[i];
                str[i] = str[b-i+a];
                str[b-i+a] = tmp;
            }
        }else {
            string p; cin>>p;
            for(int i=a;i<=b;i++) {
                str[i] = p[i-a];
            }
        }
    }
    return 0;
}
