#include <iostream>
#include <vector>

using namespace std;
using ll = long long;
const int MX = 100010;
ll f[MX],inv[MX],fi[MX];
constexpr ll mod = 998244353;
void solve(){
    inv[1] = 1;
    for(int i=2;i<MX;i++){
        inv[i] = mod - (mod/i)*inv[mod%i]%mod;
    }
    f[0] = fi[0] = 1;
    for(int i=1;i<MX;i++){
        f[i] = f[i-1]*i%mod;
        fi[i] = fi[i-1]*inv[i]%mod;
    }
}

ll nck(ll n, ll k){
    if(n<0 || k<0 || n<k) return 0;
    return f[n]*fi[k]%mod*fi[n-k]%mod;
}

ll pw(ll a,ll x){
    ll ret = 1;
    while(x){
        if(x&1) (ret *= a) %= mod;
        (a *= a) %= mod; x /= 2;
    }
    return ret;
}

int a[100010];
int main(){
    int i,n; cin >> n;
    for(i=0;i<n;i++) cin >> a[i];
    solve();
    vector<int> v;
    int c1 = 0,c5 = 0,c7 = 0;
    for(i=0;i<n;i++){
        if(a[i]==1 || a[i]==5 || a[i]==7){
            if(a[i]==1) c1++;
            if(a[i]==5) c5++;
            if(a[i]==7) c7++;
        }
        else v.push_back(a[i]);
    }
    ll ans = nck(n,c1);
    (ans *= nck(n - c1,c5)) %= mod;
    (ans *= nck(n - c1 - c5,c7)) %= mod;
    int c2 = 0,c3 = 0;
    for(i=0;i<v.size();i++){
        if(v[i]==6){
            (ans *= nck(c2 + c3,c2)) %= mod;
            c2 = 0; c3 = 0;
        }else{
            if(v[i]%2==0) c2++;
            else c3++;
        }
    }
    (ans *= nck(c2 + c3,c2)) %= mod;
    cout << ans << endl;
}
