#include<bits/stdc++.h>
using namespace std;

deque<int> a;
int opt;

int main(){
	int q;
	int p;
	int x;
	cin>>q;
	while(q--){
		cin>>opt;
		if(opt==0){
			int d;
			int x;
			cin>>d>>x;
			if(d==0){
				a.push_front(x);
			}
			else a.push_back(x);
		}
		if(opt==2){
			int d;
			int x;
			cin>>d>>x;
			if(d==0){
				a.pop_front(x);
			}
			else a.pop_back(x);
		}
		cout<<a.top()<<endl;;
	}
	
	return 0;
}
