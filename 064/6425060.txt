#include <iostream>
#include <cstdio>

using namespace std;

int count;

void printArray(int *nums, int size, int startIndex)
{
  for (int i = startIndex; i >= 0; i--)
  {
    if (i != 0) cout << nums[i] << " ";
    else cout << nums[i] << endl;
  }
}

void insertionSort(int *nums, int size, int g)
{
  for (int i = g; i < size; i++)
  {
    int a = nums[i];
    int j = i - g;
    while (j >= 0 && a < nums[j])
    {
      nums[j+g] = nums[j];
      j -= g;
      count++;
    }
    nums[j+g] = a;
  }
}

void shellSort(int *nums, int size)
{
  count = 0;
  int m = 100;
  int G[100] = {};

  int g = 1;
  for (int i = 0; i < m; i++)
  {
    G[i] = g;
    g = 3 * g + 1;
  }

  int startIndex = 0;
  for (int i = 0; i < m; i++)
  {
    if (G[i] > size)
    {
      startIndex = i-1;
      break;
    }
  }

  cout << startIndex+1 << endl;
  printArray(G, m, startIndex);

  for (int i = startIndex; i >= 0; i--)
  {
    insertionSort(nums, size, G[i]);
  }
  
  cout << count << endl;
}

int main(int argc, char const *argv[])
{
  int n;

  cin >> n;
  int *nums = new int[n];

  for (int i = 0; i < n; i++)
  {
    cin >> nums[i];
  }

  shellSort(nums, n);

  for (int i = 0; i < n; i++)
  {
    cout << nums[i] << endl;
  }

  return 0;
}

