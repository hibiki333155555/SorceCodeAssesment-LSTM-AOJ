#include<stdio.h>
#include<string.h>

int main(void){
    int i,num,count,quest,a,b,c,d,e,f;
    char str[1001],sub[1001],queststr[101],strsub[1001];
    
    scanf("%s",str);
    
    scanf("%d",&quest);
    
    for(i = 0;i < quest;i++){
        scanf("%s",queststr);
        
        count = 0;
        
        //print:aからbまで出力する
        if(strcmp(queststr,"print") == 0){
            scanf("%d %d",&a,&b);
            
            for(num = a;num <= b;num++){
                printf("%c",str[num]);
            }
            printf("\n");
        }
        
        //reverse:cからdまで逆順にする
        else if(strcmp(queststr,"reverse") == 0){
            scanf("%d %d",&c,&d);
            
            count = 0;
            
            for(num = c;num <= d;num++){
                sub[count] = str[num];
                
                count++;
            }
            
            count = d;
            
            for(num = c;num <= d;num++){
                str[num] = sub[count];
                
                count--;
            }
            //printf("reverse:%s\n",str);
        }
        
        //replace:eからfまでstrsubに置き換える
        else if(strcmp(queststr,"replace") == 0){
            scanf("%d %d %s",&e,&f, strsub);
            
            for(num = e;num <= f;num++){
                str[num] = strsub[count];
                
                count++;
            }
            //printf("replace:%s\n",str);
        }
    }
    
    return 0;
}
