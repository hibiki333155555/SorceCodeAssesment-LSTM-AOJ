#include<iostream>
#include<vector>
using namespace std;
int main()
{
	int q, ad, x, flag;
	vector<int>arr, temp;
	cin >> q;
	for (int i = 0; i < q; i++)
	{
		cin >> flag;
		switch (flag)
		{
		case 0:
			cin >> ad >> x;
			switch(ad)
			{
			case 0:
				arr.insert(arr.begin(), x);
				break;
			case 1:
				arr.push_back(x);
				break;
			}
			break;
		case 1:
			cin >> ad;
			if (arr.size() != 0 && ad >= 0 && ad < arr.size())
				temp.push_back(arr[ad]);
			break;
		case 2:
			cin >> ad;
			if (arr.size() != 0) 
			{
				switch (ad)
				{
				case 0:arr.erase(arr.begin()); break;
				case 1:arr.pop_back(); break;
				}
			}
		}
	}
	for(int i=0;i<temp.size();i++){ cout << temp[i] << endl; }
	return 0;
}
