#define rep(i,n) for(int i=0;i<(int)(n);i++)
#define ALL(v) v.begin(),v.end()
typedef long long ll;
 
#include<bits/stdc++.h>
using namespace std;

int dist[1010][1010];
int dx[4]={1,0,-1,0};
int dy[4]={0,1,0,-1};

int main(){
  ios::sync_with_stdio(false);
  std::cin.tie(nullptr);
  
  int h,w;
  cin>>h>>w;
  vector<string> S(h);
  rep(i,h) cin>>S[i];
  int sh,sw,th,tw;
  rep(i,h) rep(j,w){
    if(S[i][j]=='S') sh=i,sw=j;
    if(S[i][j]=='G') th=i,tw=j;
  }
  
  queue<pair<int,int>> que;
  dist[sh][sw]=0,que.push({sh,sw});
  while (!que.empty()) {
    auto v=que.front(); que.pop();
    int i=v.first,j=v.second;
    if(S[i][j]=='G') continue;
    else if(S[i][j]=='.' || S[i][j]=='S'){
      rep(k,4){
        int ni=i+dx[k],nj=j+dy[k];
        if(ni<0 || nj<0 || ni>=h || nj>=w) continue;
        if(S[ni][nj]=='#') continue;
        if(dist[ni][nj]>0) continue;
        dist[ni][nj]=dist[i][j]+1;
        que.push({ni,nj});
      }
    }
    else{
      int ni,nj;
      if(S[i][j]=='R') ni=i,nj=j+1;
      else if(S[i][j]=='L') ni=i,nj=j-1;
      else if(S[i][j]=='D') ni=i+1,nj=j;
      else ni=i-1,nj=j;
      if(ni<0 || nj<0 || ni>=h || nj>=w) continue;
      if(S[ni][nj]=='#') continue;
      if(dist[ni][nj]>0) continue;
      dist[ni][nj]=dist[i][j];
      que.push({ni,nj});
    }
  }
  if(dist[th][tw]==0) cout<<-1<<endl;
  else cout<<dist[th][tw]<<endl;
  
  return 0;
}
