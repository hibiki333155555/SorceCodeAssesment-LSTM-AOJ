#include<bits/stdc++.h>
using namespace std;
using ll=long long;
const ll mod=998244353;
int main(){
	ll t;cin>>t;
	while(t--){
		ll n;
		bool s;
		cin>>n>>s;
		ll k=4;
		map<ll,ll> v;
		for(int i=0;i<n;i++){
			map<ll,ll> mp;
			for(int j=0;j<4;j++){
				ll a;
				cin>>a;
				mp[a]++;
				v[a]++;
			}
			k-=max((ll)0,mp[1]-1);
		}
		if(k==2&&s==0){
			if(v[3]%2){
				cout<<1<<" "<<1<<" "<<1<<" "<<2<<endl;
				continue;
			}
			if(v[2]%2){
				cout<<1<<" "<<1<<" "<<1<<" "<<2<<endl;
				continue;
			}
		}
		if(k==1&&s==0){
			if(v[2]%2&&v[3]%2){
				cout<<1<<" "<<1<<" "<<2<<" "<<3<<endl;
				continue;
			}
			else{
				if(v[2]>v[3]){
			    	cout<<1<<" "<<1<<" "<<3<<" "<<3<<endl;
			    	continue;
				}
				else{
					cout<<1<<" "<<1<<" "<<2<<" "<<2<<endl;
					continue;
				}
			}
		}
		if(k==0){
			if(v[1]%2){
				if(v[2]+3==v[3]){
					cout<<1<<" "<<2<<" "<<2<<" "<<2<<endl;
					continue;
				}
				if(v[2]+1==v[3]){
					cout<<1<<" "<<2<<" "<<2<<" "<<3<<endl;
					continue;
				}
				if(v[2]-1==v[3]){
					cout<<1<<" "<<2<<" "<<3<<" "<<3<<endl;
					continue;
				}
				if(v[2]-3==v[3]){
					cout<<1<<" "<<3<<" "<<3<<" "<<3<<endl;
					continue;
				}
			}
			else{
				if(s==0){
					if(v[2]+2==v[3]){
				    	cout<<2<<" "<<2<<" "<<2<<" "<<3<<endl;
				    	continue;
			    	}
			    	if(v[2]==v[3]){
					    cout<<2<<" "<<2<<" "<<3<<" "<<3<<endl;
					    continue;
				    }
				    if(v[2]-2==v[3]){
					    cout<<2<<" "<<3<<" "<<3<<" "<<3<<endl;
					    continue;
			    	}
				}
				else{
					if(v[2]+4==v[3]){
				    	cout<<2<<" "<<2<<" "<<2<<" "<<2<<endl;
				    	continue;
			    	}
			    	if(v[2]==v[3]){
					    cout<<2<<" "<<3<<" "<<2<<" "<<3<<endl;
					    continue;
				    }
				    if(v[2]-4==v[3]){
					    cout<<3<<" "<<3<<" "<<3<<" "<<3<<endl;
					    continue;
			    	}
				}
			}
		}
		if(v[2]+2==v[3]) cout<<1<<" "<<2<<" "<<1<<" "<<2<<endl;
		if(v[2]-2==v[3]) cout<<1<<" "<<3<<" "<<1<<" "<<3<<endl;
		if(v[2]==v[3]) cout<<1<<" "<<2<<" "<<1<<" "<<3<<endl;
	}
}
