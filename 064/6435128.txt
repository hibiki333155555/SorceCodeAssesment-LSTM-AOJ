str = input()
n = int(input())

for i in range(n):
    cmd = input().split()
    s = int(cmd[1])
    e = int(cmd[2]) + 1 # from から to まで置き換えなので to を含ませるために+1
    if cmd[0] == "replace":
        str = str[0:s] + cmd[3] + str[e : len(str)]
    elif cmd[0] == "reverse":
        str = str[0:s] + "".join(reversed(str[s:e])) + str[e : len(str)]
    else:
        print(f"{str[s:e]}")
        
